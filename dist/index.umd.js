!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.lazyImage={})}(this,function(t){var i=Array.from({length:11}).map(function(t,i){return parseFloat((i/10).toFixed(2))}),e=function(t){this.$img=t,this.$sources=Array.from(this.$img.parentNode.querySelectorAll("source")),this.init()};e.prototype.init=function(){this.addIO()},e.prototype.addIO=function(){var t=this;this.userRootMargin=this.$img.parentNode.parentNode.dataset.rootmargin,this.io=new IntersectionObserver(function(i){i.forEach(function(i){i.intersectionRatio>0&&(t.io.unobserve(t.$img),t.loadImage())})},{rootMargin:this.userRootMargin||"400px 300px",root:null,threshold:i,delay:100,trackVisibility:!0}),this.io.observe(this.$img)},e.prototype.loadImage=function(){var t=this;this.$img.addEventListener("load",function(){t.onLoad()}),this.$sources.forEach(function(t){t.setAttribute("srcset",t.dataset.srcset),t.removeAttribute("data-srcset")}),this.$img.src=this.$img.dataset.src},e.prototype.onLoad=function(){this.$img.style.visibility="visible",this.$img.style.opacity=1};var o=function(){Array.from(document.querySelectorAll("img[data-src]")).forEach(function(t){return new e(t)})};t.LazyImage={init:function(){window.addEventListener("load",o)},run:o}});
//# sourceMappingURL=index.umd.js.map
